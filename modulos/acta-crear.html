<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Modificar Ficha T√©cnica de Veh√≠culos - Sistema de Log√≠stica">
    <meta name="theme-color" content="#003366">
    <title>Modificar Ficha T√©cnica | Transporte</title>
    <link rel="icon" href="../img/favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Arial:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        body { 
            font-family: 'Roboto', sans-serif; 
            background: #f5f5f5; 
        }
        
        /* ============================================
           CONTENEDOR PRINCIPAL - ESCRITORIO ANCHO
           ============================================ */
        .container {
            max-width: 1920px;  /* ‚úÖ M√ÅS ANCHO PARA ESCRITORIO */
            margin: 0 auto;
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 40px;
        }
        
        /* ============================================
           FORMULARIO - ANCHO COMPLETO
           ============================================ */
        .form-section {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            width: 100%;
        }
        
        .form-section h2 {
            color: #003366;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #003366;
            font-size: 1.5rem;
        }
        
        .form-section h3 {
            color: #003366;
            margin: 25px 0 15px 0;
            font-size: 1.2rem;
            padding-left: 15px;
            border-left: 4px solid #003366;
        }
        
        .form-group {
            margin-bottom: 18px;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 14px;
        }
        
        .form-group label .required {
            color: #dc2626;
            margin-left: 3px;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: 'Roboto', sans-serif;
            transition: all 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #003366;
            box-shadow: 0 0 0 3px rgba(0,51,102,0.1);
        }
        
        .form-group input:disabled,
        .form-group select:disabled,
        .form-group textarea:disabled {
            background: #f3f4f6;
            color: #6b7280;
            cursor: not-allowed;
        }
        
        /* Filas del formulario - M√ÅS ANCHAS */
        .form-row-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 18px;
        }
        
        .form-row-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 18px;
        }
        
        .form-row-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 18px;
        }
        
        /* ============================================
           SECCI√ìN DE B√öSQUEDA
           ============================================ */
        .search-section {
            background: linear-gradient(135deg, #003366 0%, #005b96 100%);
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0,51,102,0.3);
        }
        
        .search-section h3 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .search-container {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .search-input {
            flex: 1;
            min-width: 300px;
            padding: 14px 18px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            font-size: 16px;
            background: rgba(255,255,255,0.95);
        }
        
        .search-input:focus {
            outline: none;
            border-color: #fff;
            box-shadow: 0 0 0 3px rgba(255,255,255,0.3);
        }
        
        .btn-search {
            padding: 14px 32px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .btn-search:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40,167,69,0.3);
        }
        
        .btn-clear {
            padding: 14px 32px;
            background: #ffc107;
            color: #000;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .btn-clear:hover {
            background: #e0a800;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255,193,7,0.3);
        }
        
        .search-hint {
            color: rgba(255,255,255,0.9);
            font-size: 14px;
            margin-top: 15px;
            display: flex;
            gap: 25px;
            flex-wrap: wrap;
        }
        
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 20px 0;
            display: none;
            font-weight: 500;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        
        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }
        
        /* ============================================
           VISTA PREVIA - TIPO CARTA (DEBAJO DEL FORM)
           ============================================ */
        .preview-section {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            width: 100%;
        }
        
        .preview-section h2 {
            color: #003366;
            margin-bottom: 30px;
            text-align: center;
            font-size: 1.5rem;
        }
        
        /* ‚úÖ HOJA TAMA√ëO CARTA */
        .acta-document {
            width: 21.59cm;  /* ‚úÖ Ancho carta */
            min-height: 27.94cm;  /* ‚úÖ Alto carta */
            padding: 2.5cm 2cm;
            background: white;
            margin: 0 auto;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            font-family: Arial, sans-serif;  /* ‚úÖ Arial */
            font-size: 12pt;  /* ‚úÖ 12 puntos */
            line-height: 1.6;
            color: #000;  /* ‚úÖ Todo en negro */
            text-align: justify;  /* ‚úÖ Justificado */
        }
        
        /* Encabezado con logos */
        .acta-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #000;
        }
        
        .acta-logo-left,
        .acta-logo-right {
            width: 120px;
            height: 80px;
            object-fit: contain;
        }
        
        .acta-logo-placeholder {
            width: 120px;
            height: 80px;
            background: #f0f0f0;
            border: 2px dashed #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: #999;
            text-align: center;
        }
        
        .acta-title {
            text-align: center;
            flex: 1;
            padding: 0 30px;
        }
        
        .acta-title h1 {
            font-size: 13pt;
            font-weight: bold;
            margin-bottom: 8px;
            color: #000;
            line-height: 1.3;
        }
        
        .acta-title h2 {
            font-size: 12pt;
            font-weight: bold;
            margin: 5px 0;
            color: #000;
        }
        
        .acta-title h3 {
            font-size: 12pt;
            font-weight: bold;
            margin-top: 8px;
            color: #000;
        }
        
        /* Contenido del acta */
        .acta-body {
            text-align: justify;
            color: #000;
        }
        
        .acta-body p {
            margin-bottom: 18px;
            text-align: justify;
        }
        
        /* Tabla de datos del veh√≠culo */
        .acta-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            border: 2px solid #000;
        }
        
        .acta-table th {
            background: #fff;
            color: #000;
            padding: 12px;
            text-align: left;
            font-size: 11pt;
            border: 2px solid #000;
            font-weight: bold;
        }
        
        .acta-table td {
            padding: 12px;
            border: 2px solid #000;
            font-size: 11pt;
            color: #000;
        }
        
        /* Firmas */
        .acta-signatures {
            display: flex;
            justify-content: space-between;
            margin-top: 80px;
            gap: 80px;
        }
        
        .signature-box {
            flex: 1;
            text-align: center;
        }
        
        .signature-line {
            border-top: 2px solid #000;
            margin: 50px 30px 15px 30px;
            padding-top: 15px;
        }
        
        .signature-box p {
            font-size: 11pt;
            font-weight: bold;
            margin: 8px 0;
            color: #000;
        }
        
        /* Footer */
        .acta-footer {
            margin-top: 50px;
            text-align: center;
            font-size: 10pt;
            color: #000;
            border-top: 2px solid #000;
            padding-top: 20px;
        }
        
        .acta-footer p {
            margin: 8px 0;
            font-weight: bold;
        }
        
        /* ============================================
           BOTONES DE ACCI√ìN
           ============================================ */
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            margin-top: 25px;
            margin-right: 12px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #003366;
            color: white;
        }
        
        .btn-primary:hover {
            background: #002244;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .btn-warning {
            background: #f59e0b;
            color: white;
        }
        
        .btn-warning:hover {
            background: #d97706;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        /* ============================================
           ESTILOS DE IMPRESI√ìN
           ============================================ */
        @media print {
            .navbar,
            .module-header,
            .btn,
            .fotos-upload-section,
            .search-section,
            .form-section {
                display: none !important;
            }
            
            .container {
                display: block;
                padding: 0;
                max-width: none;
            }
            
            .preview-section {
                box-shadow: none;
                padding: 0;
            }
            
            .acta-document {
                box-shadow: none;
                margin: 0;
                padding: 2cm;
                width: 100%;
            }
            
            @page {
                size: letter;
                margin: 1.5cm;
            }
        }
        
        @media (max-width: 1400px) {
            .form-row-4 {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .form-row-4,
            .form-row-3,
            .form-row-2 {
                grid-template-columns: 1fr;
            }
            
            .acta-document {
                width: 100%;
                padding: 1.5cm;
            }
            
            .search-container {
                flex-direction: column;
            }
            
            .search-input {
                min-width: 100%;
            }
        }
        
        /* ============================================
           CAMPOS BLOQUEADOS CON CANDADO
           ============================================ */
        .form-group.locked label::after {
            content: ' üîí';
            font-size: 0.9em;
            color: #dc2626;
        }
        
        .form-group.locked input,
        .form-group.locked select,
        .form-group.locked textarea {
            background: #f3f4f6 !important;
            color: #6b7280 !important;
            cursor: not-allowed !important;
            border-color: #ddd !important;
        }
    </style>
</head>
<body class="dashboard-page">
    <!-- ================= BARRA DE NAVEGACI√ìN ================= -->
    <nav class="navbar" role="navigation">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="../img/logo.png" alt="Logo" class="nav-logo" width="35" height="35">
                <img src="../img/logo_derecho.png" alt="Logo Secundario" class="nav-logo" width="35" height="35">
                <span class="nav-title">Sistema Automatizado || Gesti√≥n Administrativa del CCPE ZULIA</span>
            </div>
            <div class="nav-user">
                <span class="user-email" id="userEmail">Cargando...</span>
                <button class="btn-logout" id="logoutBtn">
                    <span class="logout-icon">üö™</span>
                    <span class="logout-text">Cerrar Sesi√≥n</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- ================= CONTENIDO PRINCIPAL ================= -->
    <main class="dashboard-main" role="main">
        <!-- Header con Navegaci√≥n de Migas -->
        <header class="module-header">
            <div class="breadcrumb">
                <a href="../dashboard.html" class="breadcrumb-link">üè† Dashboard</a>
                <span class="breadcrumb-separator">/</span>
                <a href="transporte.html" class="breadcrumb-link">Transporte</a>
                <span class="breadcrumb-separator">/</span>
                <a href="ficha.html" class="breadcrumb-link">Ficha T√©cnica</a>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-current">Modificar Ficha</span>
            </div>
            <button class="btn btn-secondary btn-sm" onclick="window.location.href='ficha.html'">
                ‚Üê Volver a Ficha
            </button>
        </header>

        <!-- T√≠tulo del M√≥dulo -->
        <section class="module-title-section">
            <h1 class="module-title">‚úèÔ∏è Modificar Ficha T√©cnica de Veh√≠culo</h1>
            <p class="module-subtitle">Busque y edite una ficha t√©cnica existente</p>
        </section>

        <div class="container">
            <!-- ============================================
                 FORMULARIO (ARRIBA)
                 ============================================ -->
            <div class="form-section">
                <!-- SECCI√ìN DE B√öSQUEDA -->
                <div class="search-section">
                    <h3>üîç Buscar Ficha T√©cnica en Base de Datos</h3>
                    <div id="searchAlert" class="alert"></div>
                    <div class="search-container">
                        <input 
                            type="text" 
                            id="searchInput" 
                            class="search-input" 
                            placeholder="Ingrese placa, facsimilar, serial de carrocer√≠a, serial de motor o N¬∞ identificaci√≥n..." 
                            autocomplete="off"
                        >
                        <button class="btn-search" id="btnSearch">
                            <span>üîç</span>
                            <span>Buscar</span>
                        </button>
                        <button class="btn-clear" id="btnLimpiar">
                            <span>üîÑ</span>
                            <span>Limpiar</span>
                        </button>
                    </div>
                    <div class="search-hint">
                        <span>üí° Busque por:</span>
                        <span>üöó Placa</span>
                        <span>üìÑ Facsimilar</span>
                        <span>üî¢ Serial Carrocer√≠a</span>
                        <span>‚öôÔ∏è Serial Motor</span>
                        <span>üÜî N¬∞ Identificaci√≥n</span>
                    </div>
                </div>

                <h2>üìù Datos del Veh√≠culo</h2>
                <form id="fichaForm" class="form-disabled">
                    <!-- Campo oculto para el ID de la ficha -->
                    <input type="hidden" id="fichaId" name="fichaId">
                    
                    <!-- FILA 1: 4 CAMPOS -->
                    <div class="form-row-4">
                        <div class="form-group">
                            <label>Marca <span class="required">*</span></label>
                            <input type="text" id="marca" name="marca" required placeholder="Ej: MITSUBISHI" disabled>
                        </div>
                        <div class="form-group">
                            <label>Modelo <span class="required">*</span></label>
                            <input type="text" id="modelo" name="modelo" required placeholder="Ej: L200" disabled>
                        </div>
                        <div class="form-group">
                            <label>Tipo <span class="required">*</span></label>
                            <select id="tipo" name="tipo" required disabled>
                                <option value="">Seleccione...</option>
                                <option value="AUTOMOVIL">AUTOMOVIL</option>
                                <option value="BUS">BUS</option>
                                <option value="CAMION">CAMION</option>
                                <option value="CAMIONETA">CAMIONETA</option>
                                <option value="ENDURO">ENDURO</option>
                                <option value="ESPECIAL">ESPECIAL</option>
                                <option value="MACHITO">MACHITO</option>
                                <option value="MINIBUS">MINIBUS</option>
                                <option value="MOTO">MOTO</option>
                                <option value="PICKUP">PICKUP</option>
                                <option value="SPORTWAGON">SPORTWAGON</option>
                                <option value="TRACCION DE SANGRE">TRACCION DE SANGRE</option>
                                <option value="TRIMOVIL">TRIMOVIL</option>
                                <option value="VAM">VAM</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Clase <span class="required">*</span></label>
                            <select id="clase" name="clase" required disabled>
                                <option value="">Seleccione...</option>
                                <option value="AUTOBUS">AUTOBUS</option>
                                <option value="AUTOMOVIL">AUTOMOVIL</option>
                                <option value="BLINDADO">BLINDADO</option>
                                <option value="CAMION">CAMION</option>
                                <option value="CAMIONETA">CAMIONETA</option>
                                <option value="ESPECIAL">ESPECIAL</option>
                                <option value="MOTO">MOTO</option>
                                <option value="TRACCIONDESANGRE">TRACCIONDESANGRE</option>
                            </select>
                        </div>
                    </div>

                    <!-- FILA 2: 3 CAMPOS -->
                    <div class="form-row-3">
                        <div class="form-group">
                            <label>Serial Carrocer√≠a <span class="required">*</span></label>
                            <input type="text" id="serialCarroceria" name="serialCarroceria" required placeholder="Ej: MMBJJKL10PH096515" disabled>
                        </div>
                        <div class="form-group">
                            <label>Serial Motor <span class="required">*</span></label>
                            <input type="text" id="serialMotor" name="serialMotor" required placeholder="Ej: 4N15UKL1409" disabled>
                        </div>
                        <div class="form-group">
                            <label>Color <span class="required">*</span></label>
                            <input type="text" id="color" name="color" required placeholder="Ej: BLANCO" disabled>
                        </div>
                    </div>

                    <!-- FILA 3: 3 CAMPOS -->
                    <div class="form-row-3">
                        <div class="form-group">
                            <label>Placa <span class="required">*</span></label>
                            <input type="text" id="placa" name="placa" required placeholder="Ej: 3P417" disabled>
                        </div>
                        <div class="form-group">
                            <label>Facs√≠mil</label>
                            <input type="text" id="facsimilar" name="facsimilar" placeholder="Ej: 3P417" disabled>
                        </div>
                        <div class="form-group">
                            <label>Estatus del Veh√≠culo <span class="required">*</span></label>
                            <select id="estatus" name="estatus" required disabled>
                                <option value="">Seleccione...</option>
                                <option value="OPERATIVA">OPERATIVA</option>
                                <option value="INOPERATIVA">INOPERATIVA</option>
                                <option value="REPARACION">REPARACION</option>
                                <option value="TALLER">TALLER</option>
                                <option value="DESINCORPORADA">DESINCORPORADA</option>
                                <option value="DONACION">DONACION</option>
                                <option value="COMODATO">COMODATO</option>
                                <option value="DENUNCIADA">DENUNCIADA</option>
                            </select>
                        </div>
                    </div>

                    <!-- DEPENDENCIA -->
                    <div class="form-group">
                        <label>Dependencia <span class="required">*</span></label>
                        <textarea id="dependencia" name="dependencia" rows="3" required placeholder="Ej: SERVICIO PATRULLAJE VEHICULAR CUADRANTES DE PAZ" disabled></textarea>
                    </div>

                    <!-- INFORMACI√ìN T√âCNICO MEC√ÅNICA -->
                    <h3>Informaci√≥n T√©cnico Mec√°nica (Si es Inoperativo)</h3>
                    <div class="form-group">
                        <label>Causa</label>
                        <input type="text" id="causa" name="causa" placeholder="Describa la causa" disabled>
                    </div>
                    <div class="form-row-2">
                        <div class="form-group">
                            <label>Mec√°nica</label>
                            <input type="text" id="mecanica" name="mecanica" placeholder="Estado mec√°nico" disabled>
                        </div>
                        <div class="form-group">
                            <label>Diagn√≥stico</label>
                            <input type="text" id="diagnostico" name="diagnostico" placeholder="Diagn√≥stico" disabled>
                        </div>
                    </div>
                    <div class="form-row-2">
                        <div class="form-group">
                            <label>Ubicaci√≥n</label>
                            <input type="text" id="ubicacion" name="ubicacion" placeholder="Ubicaci√≥n actual" disabled>
                        </div>
                        <div class="form-group">
                            <label>Tapicer√≠a</label>
                            <input type="text" id="tapiceria" name="tapiceria" placeholder="Estado tapicer√≠a" disabled>
                        </div>
                    </div>
                    <div class="form-row-2">
                        <div class="form-group">
                            <label>Cauchos</label>
                            <input type="text" id="cauchos" name="cauchos" placeholder="Estado cauchos" disabled>
                        </div>
                        <div class="form-group">
                            <label>Luces</label>
                            <input type="text" id="luces" name="luces" placeholder="Estado luces" disabled>
                        </div>
                    </div>

                    <!-- OBSERVACIONES -->
                    <div class="form-group">
                        <label>Observaciones</label>
                        <textarea id="observaciones" name="observaciones" rows="4" placeholder="Observaciones adicionales" disabled></textarea>
                    </div>

                    <!-- SECCI√ìN DE CARGA DE FOTOS -->
                    <div class="fotos-upload-section">
                        <h3>üì∏ Registro Fotogr√°fico (4 Fotos)</h3>
                        <div class="fotos-upload-container" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-top: 20px;">
                            <div class="foto-upload-box" style="background: white; border: 2px solid #ddd; border-radius: 8px; padding: 10px; text-align: center;">
                                <button type="button" class="btn-remove" onclick="removeFoto(1)" style="position: absolute; top: 5px; right: 5px; background: #dc2626; color: white; border: none; border-radius: 50%; width: 24px; height: 24px; cursor: pointer; font-size: 14px; display: none; align-items: center; justify-content: center;">‚úï</button>
                                <div class="preview-img" id="previewFoto1Container" style="width: 100%; height: 120px; object-fit: cover; border-radius: 4px; margin-bottom: 10px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #999; font-size: 12px; overflow: hidden;">
                                    <div class="placeholder" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: #999;">
                                        <span style="font-size: 24px; margin-bottom: 5px;">üì∑</span>
                                        <span>Foto 1</span>
                                    </div>
                                    <img id="previewFoto1" alt="Foto 1" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px; display: none;">
                                </div>
                                <input type="file" id="foto1" name="foto1" accept="image/*" onchange="previewImage(this, 'previewFoto1')" disabled style="width: 100%; font-size: 11px; padding: 6px;">
                            </div>
                            <div class="foto-upload-box" style="background: white; border: 2px solid #ddd; border-radius: 8px; padding: 10px; text-align: center;">
                                <button type="button" class="btn-remove" onclick="removeFoto(2)" style="position: absolute; top: 5px; right: 5px; background: #dc2626; color: white; border: none; border-radius: 50%; width: 24px; height: 24px; cursor: pointer; font-size: 14px; display: none; align-items: center; justify-content: center;">‚úï</button>
                                <div class="preview-img" id="previewFoto2Container" style="width: 100%; height: 120px; object-fit: cover; border-radius: 4px; margin-bottom: 10px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #999; font-size: 12px; overflow: hidden;">
                                    <div class="placeholder" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: #999;">
                                        <span style="font-size: 24px; margin-bottom: 5px;">üì∑</span>
                                        <span>Foto 2</span>
                                    </div>
                                    <img id="previewFoto2" alt="Foto 2" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px; display: none;">
                                </div>
                                <input type="file" id="foto2" name="foto2" accept="image/*" onchange="previewImage(this, 'previewFoto2')" disabled style="width: 100%; font-size: 11px; padding: 6px;">
                            </div>
                            <div class="foto-upload-box" style="background: white; border: 2px solid #ddd; border-radius: 8px; padding: 10px; text-align: center;">
                                <button type="button" class="btn-remove" onclick="removeFoto(3)" style="position: absolute; top: 5px; right: 5px; background: #dc2626; color: white; border: none; border-radius: 50%; width: 24px; height: 24px; cursor: pointer; font-size: 14px; display: none; align-items: center; justify-content: center;">‚úï</button>
                                <div class="preview-img" id="previewFoto3Container" style="width: 100%; height: 120px; object-fit: cover; border-radius: 4px; margin-bottom: 10px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #999; font-size: 12px; overflow: hidden;">
                                    <div class="placeholder" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: #999;">
                                        <span style="font-size: 24px; margin-bottom: 5px;">üì∑</span>
                                        <span>Foto 3</span>
                                    </div>
                                    <img id="previewFoto3" alt="Foto 3" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px; display: none;">
                                </div>
                                <input type="file" id="foto3" name="foto3" accept="image/*" onchange="previewImage(this, 'previewFoto3')" disabled style="width: 100%; font-size: 11px; padding: 6px;">
                            </div>
                            <div class="foto-upload-box" style="background: white; border: 2px solid #ddd; border-radius: 8px; padding: 10px; text-align: center;">
                                <button type="button" class="btn-remove" onclick="removeFoto(4)" style="position: absolute; top: 5px; right: 5px; background: #dc2626; color: white; border: none; border-radius: 50%; width: 24px; height: 24px; cursor: pointer; font-size: 14px; display: none; align-items: center; justify-content: center;">‚úï</button>
                                <div class="preview-img" id="previewFoto4Container" style="width: 100%; height: 120px; object-fit: cover; border-radius: 4px; margin-bottom: 10px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #999; font-size: 12px; overflow: hidden;">
                                    <div class="placeholder" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: #999;">
                                        <span style="font-size: 24px; margin-bottom: 5px;">üì∑</span>
                                        <span>Foto 4</span>
                                    </div>
                                    <img id="previewFoto4" alt="Foto 4" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px; display: none;">
                                </div>
                                <input type="file" id="foto4" name="foto4" accept="image/*" onchange="previewImage(this, 'previewFoto4')" disabled style="width: 100%; font-size: 11px; padding: 6px;">
                            </div>
                        </div>
                    </div>

                    <!-- BOTONES -->
                    <div>
                        <button type="button" class="btn btn-secondary" id="btnCancelar" disabled>‚ùå Cancelar</button>
                        <button type="button" class="btn btn-warning" id="btnEditar">‚úèÔ∏è Editar Ficha</button>
                        <button type="submit" class="btn btn-primary" id="btnGuardar" style="display: none;">üíæ Guardar Cambios</button>
                    </div>
                </form>
            </div>

            <!-- ============================================
                 VISTA PREVIA (DEBAJO DEL FORMULARIO)
                 ============================================ -->
            <div class="preview-section" id="previewSection" style="display: none;">
                <h2 style="color: #003366; margin-bottom: 30px;">üìÑ Vista Previa del Documento</h2>
                
                <div class="acta-document" id="fichaPreview">
                    <!-- Encabezado con logos -->
                    <div class="acta-header">
                        <div class="acta-logo-left">
                            <img src="../img/logo_izquierdo.png" alt="Logo Institucional" class="acta-logo-left" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="acta-logo-placeholder" style="display: none;">
                                Logo<br>Institucional
                            </div>
                        </div>
                        
                        <div class="acta-title">
                            <h1>Ministerio del Poder Popular para<br>Relaciones Interiores, Justicia y Paz</h1>
                            <h2>Cuerpo de Polic√≠a Nacional Bolivariana</h2>
                            <h3>REDIP: OCCIDENTAL - CCPE ZULIA</h3>
                        </div>
                        
                        <div class="acta-logo-right">
                            <img src="../img/logo_derecho.png" alt="Logo CPNB" class="acta-logo-right" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="acta-logo-placeholder" style="display: none;">
                                Logo<br>CPNB
                            </div>
                        </div>
                    </div>

                    <!-- T√≠tulo del documento -->
                    <div style="text-align: center; margin-bottom: 30px;">
                        <h2 style="font-size: 14pt; font-weight: bold; color: #000; margin-bottom: 15px;">
                            FICHA T√âCNICA DE VEH√çCULO
                        </h2>
                    </div>

                    <!-- Cuerpo del documento -->
                    <div class="acta-body">
                        <!-- Tabla de datos del veh√≠culo -->
                        <table class="acta-table">
                            <thead>
                                <tr>
                                    <th colspan="6" style="text-align: center; font-size: 13pt;">DATOS DEL VEH√çCULO</th>
                                </tr>
                                <tr>
                                    <th style="width: 16%;">Marca</th>
                                    <td id="previewMarca" style="width: 17%;">-</td>
                                    <th style="width: 16%;">Modelo</th>
                                    <td id="previewModelo" style="width: 17%;">-</td>
                                    <th style="width: 16%;">Tipo</th>
                                    <td id="previewTipo" style="width: 18%;">-</td>
                                </tr>
                                <tr>
                                    <th>Serial Carrocer√≠a</th>
                                    <td id="previewSerialCarroceria">-</td>
                                    <th>Clase</th>
                                    <td id="previewClase">-</td>
                                    <th>Color</th>
                                    <td id="previewColor">-</td>
                                </tr>
                                <tr>
                                    <th>Placa</th>
                                    <td id="previewPlaca">N/P</td>
                                    <th>Facs√≠mil</th>
                                    <td id="previewFacsimilar">N/P</td>
                                    <th>Dependencia</th>
                                    <td id="previewDependencia" colspan="3">-</td>
                                </tr>
                                <tr>
                                    <th>Serial Motor</th>
                                    <td id="previewSerialMotor">-</td>
                                    <th colspan="4">Estatus: <span id="previewEstatus" style="font-weight: bold;">-</span></th>
                                </tr>
                            </thead>
                        </table>

                        <!-- Informaci√≥n T√©cnico Mec√°nica -->
                        <div style="margin-top: 30px;">
                            <h3 style="font-size: 12pt; font-weight: bold; color: #000; border-bottom: 2px solid #000; padding-bottom: 8px;">INFORMACI√ìN T√âCNICO MEC√ÅNICA</h3>
                            <table class="acta-table" style="margin-top: 15px;">
                                <tr>
                                    <th style="width: 20%;">Causa</th>
                                    <td id="previewCausa" style="width: 30%;">-</td>
                                    <th style="width: 20%;">Diagn√≥stico</th>
                                    <td id="previewDiagnostico" style="width: 30%;">-</td>
                                </tr>
                                <tr>
                                    <th>Mec√°nica</th>
                                    <td id="previewMecanica">-</td>
                                    <th>Ubicaci√≥n</th>
                                    <td id="previewUbicacion">-</td>
                                </tr>
                                <tr>
                                    <th>Tapicer√≠a</th>
                                    <td id="previewTapiceria">-</td>
                                    <th>Cauchos</th>
                                    <td id="previewCauchos">-</td>
                                </tr>
                                <tr>
                                    <th>Luces</th>
                                    <td id="previewLuces">-</td>
                                    <th>Observaciones</th>
                                    <td id="previewObservaciones" colspan="3" style="white-space: pre-wrap;">-</td>
                                </tr>
                            </table>
                        </div>

                        <!-- Registro Fotogr√°fico -->
                        <div style="margin-top: 30px;">
                            <h3 style="font-size: 12pt; font-weight: bold; color: #000; border-bottom: 2px solid #000; padding-bottom: 8px;">REGISTRO FOTOGR√ÅFICO</h3>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-top: 15px;">
                                <div id="previewBox1" style="border: 2px solid #000; height: 140px; display: flex; align-items: center; justify-content: center; background: #f0f0f0; font-weight: bold; font-size: 13pt; border-radius: 4px; overflow: hidden;">
                                    <span>Foto 1</span>
                                    <img id="previewImg1" alt="Foto 1" style="width: 100%; height: 100%; object-fit: cover; display: none;">
                                </div>
                                <div id="previewBox2" style="border: 2px solid #000; height: 140px; display: flex; align-items: center; justify-content: center; background: #f0f0f0; font-weight: bold; font-size: 13pt; border-radius: 4px; overflow: hidden;">
                                    <span>Foto 2</span>
                                    <img id="previewImg2" alt="Foto 2" style="width: 100%; height: 100%; object-fit: cover; display: none;">
                                </div>
                                <div id="previewBox3" style="border: 2px solid #000; height: 140px; display: flex; align-items: center; justify-content: center; background: #f0f0f0; font-weight: bold; font-size: 13pt; border-radius: 4px; overflow: hidden;">
                                    <span>Foto 3</span>
                                    <img id="previewImg3" alt="Foto 3" style="width: 100%; height: 100%; object-fit: cover; display: none;">
                                </div>
                                <div id="previewBox4" style="border: 2px solid #000; height: 140px; display: flex; align-items: center; justify-content: center; background: #f0f0f0; font-weight: bold; font-size: 13pt; border-radius: 4px; overflow: hidden;">
                                    <span>Foto 4</span>
                                    <img id="previewImg4" alt="Foto 4" style="width: 100%; height: 100%; object-fit: cover; display: none;">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="acta-footer">
                        <p style="color: #000;">¬°Ch√°vez Vive!... La Patria Sigue...</p>
                        <p style="color: #000;">¬°Independencia y Patria Socialista...! ¬°Viviremos y Venceremos!</p>
                        <p style="color: #000;">PROTEGER, DEFENDER Y SERVIR A NUESTRO PUEBLO</p>
                        <p style="margin-top: 15px; font-size: 9pt;">Documento generado el: <span id="fechaGeneracion"></span></p>
                    </div>
                </div>

                <!-- Botones de impresi√≥n -->
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-primary" onclick="window.print()">üñ®Ô∏è Imprimir Ficha</button>
                </div>
            </div>
        </div>
    </main>

    <!-- ================= SCRIPTS ================= -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../js/config.js"></script>
    <script src="../js/ficha-modificar.js"></script>
</body>
</html>
