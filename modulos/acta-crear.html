<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Crear Acta de Asignaci√≥n - Sistema de Log√≠stica">
    <meta name="theme-color" content="#003366">
    <title>Crear Acta de Asignaci√≥n | Transporte</title>
    <link rel="icon" href="../img/favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Arial:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background: #f5f5f5;
        }
        
        /* Contenedor principal - Dise√±o para escritorio */
        .container {
            max-width: 1920px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        /* Secci√≥n del formulario */
        .form-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .form-section h2 {
            color: #003366;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #003366;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            font-weight: 500;
            margin-bottom: 5px;
            color: #333;
            font-size: 14px;
        }
        
        .form-group label .required {
            color: #dc2626;
            margin-left: 3px;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            font-family: 'Roboto', sans-serif;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #003366;
            box-shadow: 0 0 0 2px rgba(0,51,102,0.1);
        }
        
        .form-group input:disabled,
        .form-group select:disabled,
        .form-group textarea:disabled {
            background: #f3f4f6;
            color: #6b7280;
            cursor: not-allowed;
        }
        
        .form-row-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .form-row-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }
        
        /* Secci√≥n de b√∫squeda */
        .search-section {
            background: linear-gradient(135deg, #003366 0%, #005b96 100%);
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
        }
        
        .search-section h3 {
            color: white;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .search-container {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .search-input {
            flex: 1;
            min-width: 250px;
            padding: 12px 16px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 6px;
            font-size: 15px;
            background: rgba(255,255,255,0.95);
        }
        
        .search-input:focus {
            outline: none;
            border-color: #fff;
            box-shadow: 0 0 0 3px rgba(255,255,255,0.3);
        }
        
        .btn-search {
            padding: 12px 28px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-search:hover {
            background: #218838;
        }
        
        .btn-clear {
            padding: 12px 28px;
            background: #ffc107;
            color: #000;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .btn-clear:hover {
            background: #e0a800;
        }
        
        .alert {
            padding: 12px 16px;
            border-radius: 6px;
            margin: 15px 0;
            display: none;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        /* Botones de acci√≥n */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            margin-top: 20px;
            margin-right: 10px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #003366;
            color: white;
        }
        
        .btn-primary:hover {
            background: #002244;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
        }
        
        /* ============================================
           VISTA PREVIA DEL DOCUMENTO - TIPO CARTA
           ============================================ */
        .preview-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: auto;
        }
        
        .preview-section h2 {
            color: #003366;
            margin-bottom: 20px;
            text-align: center;
        }
        
        /* Hoja tama√±o carta */
        .acta-document {
            width: 21.59cm;
            min-height: 27.94cm;
            padding: 2.5cm 2cm;
            background: white;
            margin: 0 auto;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            font-family: Arial, sans-serif;
            font-size: 12pt;
            line-height: 1.5;
            color: #000;
        }
        
        /* Encabezado con logos */
        .acta-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #000;
        }
        
        .acta-logo-left,
        .acta-logo-right {
            width: 120px;
            height: 80px;
            object-fit: contain;
        }
        
        .acta-logo-placeholder {
            width: 120px;
            height: 80px;
            background: #f0f0f0;
            border: 2px dashed #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #999;
            text-align: center;
        }
        
        .acta-title {
            text-align: center;
            flex: 1;
            padding: 0 20px;
        }
        
        .acta-title h1 {
            font-size: 14pt;
            font-weight: bold;
            margin-bottom: 5px;
            color: #000;
        }
        
        .acta-title h2 {
            font-size: 12pt;
            font-weight: bold;
            margin-bottom: 3px;
            color: #000;
        }
        
        .acta-title h3 {
            font-size: 12pt;
            font-weight: bold;
            color: #000;
        }
        
        /* Contenido del acta */
        .acta-body {
            text-align: justify;
            color: #000;
        }
        
        .acta-body p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* Tabla de datos del veh√≠culo */
        .acta-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 2px solid #000;
        }
        
        .acta-table th {
            background: #fff;
            color: #000;
            padding: 10px;
            text-align: left;
            font-size: 11pt;
            border: 1px solid #000;
            font-weight: bold;
        }
        
        .acta-table td {
            padding: 10px;
            border: 1px solid #000;
            font-size: 11pt;
            color: #000;
        }
        
        /* Firmas */
        .acta-signatures {
            display: flex;
            justify-content: space-between;
            margin-top: 60px;
            gap: 50px;
        }
        
        .signature-box {
            flex: 1;
            text-align: center;
        }
        
        .signature-line {
            border-top: 1px solid #000;
            margin: 40px 20px 10px 20px;
            padding-top: 10px;
        }
        
        .signature-box p {
            font-size: 11pt;
            font-weight: bold;
            margin: 5px 0;
            color: #000;
        }
        
        /* Footer */
        .acta-footer {
            margin-top: 40px;
            text-align: center;
            font-size: 10pt;
            color: #000;
            border-top: 1px solid #000;
            padding-top: 15px;
        }
        
        .acta-footer p {
            margin: 5px 0;
            font-weight: bold;
        }
        
        /* Estilos de impresi√≥n */
        @media print {
            .navbar,
            .module-header,
            .btn,
            .search-section,
            .form-section,
            .preview-section h2 {
                display: none !important;
            }
            
            .container {
                display: block;
                padding: 0;
                max-width: none;
            }
            
            .preview-section {
                box-shadow: none;
                padding: 0;
            }
            
            .acta-document {
                box-shadow: none;
                margin: 0;
                padding: 2cm;
            }
            
            @page {
                size: letter;
                margin: 1.5cm;
            }
        }
        
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="dashboard-page">
    <!-- Navegaci√≥n -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="../img/logo.png" alt="Logo" class="nav-logo" width="35" height="35">
                <img src="../img/logo_derecho.png" alt="Logo Secundario" class="nav-logo" width="35" height="35">
                <span class="nav-title">Sistema Automatizado || Gesti√≥n Administrativa del CCPE ZULIA</span>
            </div>
            <div class="nav-user">
                <span class="user-email" id="userEmail">Cargando...</span>
                <button class="btn-logout" id="logoutBtn">üö™ Cerrar Sesi√≥n</button>
            </div>
        </div>
    </nav>

    <!-- Contenido Principal -->
    <main class="dashboard-main">
        <header class="module-header">
            <div class="breadcrumb">
                <a href="../dashboard.html">üè† Dashboard</a>
                <span class="breadcrumb-separator">/</span>
                <a href="transporte.html">Transporte</a>
                <span class="breadcrumb-separator">/</span>
                <a href="acta.html">Acta de Asignaci√≥n</a>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-current">Crear Acta</span>
            </div>
            <button class="btn btn-secondary btn-sm" onclick="window.location.href='acta.html'">‚Üê Volver</button>
        </header>

        <section class="module-title-section">
            <h1 class="module-title">üìù Crear Acta de Asignaci√≥n de Veh√≠culo</h1>
            <p class="module-subtitle">Busque el veh√≠culo y complete los datos del funcionario asignado</p>
        </section>

        <div class="container">
            <!-- Formulario -->
            <div class="form-section">
                <!-- B√öSQUEDA DE VEH√çCULO -->
                <div class="search-section">
                    <h3>üîç Buscar Veh√≠culo en Base de Datos</h3>
                    <div id="searchAlert" class="alert"></div>
                    <div class="search-container">
                        <input 
                            type="text" 
                            id="searchInput" 
                            class="search-input" 
                            placeholder="Ingrese placa, facs√≠mil o serial de carrocer√≠a..."
                            autocomplete="off"
                        >
                        <button class="btn-search" id="btnBuscar">
                            <span>üîç</span>
                            <span>Buscar</span>
                        </button>
                        <button class="btn-clear" id="btnLimpiar">
                            <span>üîÑ</span>
                            <span>Limpiar</span>
                        </button>
                    </div>
                </div>

                <h2>üìã Datos del Funcionario Asignado</h2>
                <form id="actaForm">
                    <!-- Campos ocultos del veh√≠culo -->
                    <input type="hidden" id="vehiculoId" name="vehiculoId">
                    <input type="hidden" id="vehiculoMarca" name="vehiculoMarca">
                    <input type="hidden" id="vehiculoModelo" name="vehiculoModelo">
                    <input type="hidden" id="vehiculoPlaca" name="vehiculoPlaca">
                    <input type="hidden" id="vehiculoSerialCarroceria" name="vehiculoSerialCarroceria">
                    <input type="hidden" id="vehiculoSerialMotor" name="vehiculoSerialMotor">
                    <input type="hidden" id="vehiculoFacsimil" name="vehiculoFacsimil">

                    <!-- FILA 1: Datos del funcionario -->
                    <div class="form-row-2">
                        <div class="form-group">
                            <label>Nombre Completo del Funcionario <span class="required">*</span></label>
                            <input type="text" id="funcionarioNombre" name="funcionarioNombre" required 
                                   placeholder="Ej: PRIMER COMISARIO (CPNB) ALBERTO PARRA"
                                   oninput="actualizarVistaPrevia()">
                        </div>
                        <div class="form-group">
                            <label>C√©dula de Identidad <span class="required">*</span></label>
                            <input type="text" id="funcionarioCedula" name="funcionarioCedula" required 
                                   placeholder="Ej: V-13.550.532"
                                   oninput="actualizarVistaPrevia()">
                        </div>
                    </div>

                    <!-- FILA 2: Unidad y Cargo -->
                    <div class="form-row-2">
                        <div class="form-group">
                            <label>Unidad de Asignaci√≥n <span class="required">*</span></label>
                            <input type="text" id="unidadAsignacion" name="unidadAsignacion" required 
                                   placeholder="Ej: Oficina de Gesti√≥n Humana de la Redip Occidental"
                                   oninput="actualizarVistaPrevia()">
                        </div>
                        <div class="form-group">
                            <label>Cargo del Funcionario</label>
                            <input type="text" id="funcionarioCargo" name="funcionarioCargo" 
                                   placeholder="Ej: Director de la Redip Occidental"
                                   oninput="actualizarVistaPrevia()">
                        </div>
                    </div>

                    <!-- FILA 3: Fecha -->
                    <div class="form-row-2">
                        <div class="form-group">
                            <label>Fecha de Asignaci√≥n</label>
                            <input type="date" id="fechaAsignacion" name="fechaAsignacion" 
                                   oninput="actualizarVistaPrevia()">
                        </div>
                        <div class="form-group">
                            <label>N√∫mero de Acta</label>
                            <input type="text" id="numeroActa" name="numeroActa" 
                                   placeholder="Ej: ACTA-2025-001">
                        </div>
                    </div>

                    <!-- BOTONES -->
                    <div>
                        <button type="button" class="btn btn-secondary" id="btnCancelar">‚ùå Cancelar</button>
                        <button type="button" class="btn btn-success" id="btnImprimir">üñ®Ô∏è Imprimir Acta</button>
                        <button type="button" class="btn btn-primary" id="btnGuardar">üíæ Guardar Acta</button>
                    </div>
                </form>
            </div>

            <!-- Vista Previa del Documento -->
            <div class="preview-section">
                <h2 style="color: #003366; margin-bottom: 20px;">üìÑ Vista Previa del Acta</h2>
                
                <div class="acta-document" id="actaPreview">
                    <!-- Encabezado con logos -->
                    <div class="acta-header">
                        <div class="acta-logo-left">
                            <img src="../img/logo_izquierdo.png" alt="Logo Institucional" class="acta-logo-left" 
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="acta-logo-placeholder" style="display: none;">
                                Logo<br>Institucional
                            </div>
                        </div>
                        
                        <div class="acta-title">
                            <h1>Ministerio del Poder Popular para<br>Relaciones Interiores, Justicia y Paz</h1>
                            <h2>Cuerpo de Polic√≠a Nacional Bolivariana</h2>
                            <h3>REDIP: OCCIDENTAL - CCPE ZULIA</h3>
                        </div>
                        
                        <div class="acta-logo-right">
                            <img src="../img/logo_derecho.png" alt="Logo CPNB" class="acta-logo-right" 
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="acta-logo-placeholder" style="display: none;">
                                Logo<br>CPNB
                            </div>
                        </div>
                    </div>

                    <!-- T√≠tulo del documento -->
                    <div style="text-align: center; margin-bottom: 25px;">
                        <h2 style="font-size: 14pt; font-weight: bold; color: #000; margin-bottom: 10px;">
                            ACTA DE ASIGNACI√ìN DE UNIDAD VEHICULAR
                        </h2>
                    </div>

                    <!-- Cuerpo del acta -->
                    <div class="acta-body">
                        <p>
                            Quien suscribe, <strong>COMISARIO MAYOR (CPNB) Dr. GUILLERMO PARRA PULIDO</strong>, 
                            Director de la Redip Occidental y Coordinador del Centro Coordinaci√≥n Policial Estadal Zulia, 
                            seg√∫n resoluci√≥n OGH-0262 de Fecha 05 de Septiembre del 2022, mediante la presente, dejo constancia 
                            de la entrega formal, en calidad de asignaci√≥n para asuntos del servicio de la siguiente unidad 
                            del CCPE Estadal Zulia:
                        </p>

                        <!-- Tabla de datos del veh√≠culo -->
                        <table class="acta-table">
                            <thead>
                                <tr>
                                    <th style="width: 20%;">Marca-Modelo</th>
                                    <th style="width: 25%;">Serial Carrocer√≠a</th>
                                    <th style="width: 20%;">Serial Motor</th>
                                    <th style="width: 15%;">Placa</th>
                                    <th style="width: 20%;">Facs√≠mil</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td id="previewMarcaModelo">-</td>
                                    <td id="previewSerialCarroceria">-</td>
                                    <td id="previewSerialMotor">-</td>
                                    <td id="previewPlaca">N/P</td>
                                    <td id="previewFacsimil">N/P</td>
                                </tr>
                            </tbody>
                        </table>

                        <p>
                            Esta unidad es asignada a la <strong id="previewUnidadAsignacion">-</strong>, 
                            en la figura jur√≠dica del ciudadano <strong id="previewFuncionarioNombre">-</strong>, 
                            C√©dula de Identidad n√∫mero <strong id="previewFuncionarioCedula">-</strong>, 
                            esta unidad es asignada para uso netamente del servicio y labores de patrullaje en el 
                            referido Estado. Obedeciendo al Reimpulso de la gran misi√≥n cuadrante de Paz.
                        </p>

                        <p>
                            En atenci√≥n que la unidad descrita es un bien p√∫blico, no podr√° ser cedido temporal o 
                            definitivamente a terceras personas y en concordancia a lo dispuesto en el art√≠culo 45 
                            de la ley de Bienes P√∫blicos:
                        </p>

                        <p style="background: #f9f9f9; padding: 15px; border-left: 4px solid #000; font-style: italic;">
                            "El √≥rgano o ente que tenga la propiedad, custodia, protecci√≥n, adscripci√≥n o asignaci√≥n 
                            de un bien p√∫blico, nombrara un encargado o encargada, quien tendr√° la responsabilidad de 
                            mantener y administrar el mismo, respondiendo patrimonialmente por cualquier da√±o, p√©rdida 
                            o deterioro sufrido por el bien custodiado, en cuanto le sea imputable."
                        </p>

                        <p>
                            El veh√≠culo descrito, deber√° mantenerse sin alteraciones en sus caracter√≠sticas originales 
                            y cualquier da√±o visible u oculto, modificaci√≥n, alteraci√≥n, deterioro, colisi√≥n o extrav√≠o, 
                            ser√° responsabilidad √∫nica del funcionario antes identificado; quien se compromete a cuidar, 
                            mantener, resguardar y custodiar, el bien del Estado asignado y que al momento de detectar 
                            cualquier falla, anomal√≠a, desperfecto o irregularidad del mismo, deber√° reportarla 
                            inmediatamente a las siguientes autoridades: Jefe de los servicios, Jefe del √°rea de gesti√≥n 
                            administrativa y Jefe de del parque automotor del Centro de Coordinaci√≥n Policial Zulia, 
                            a los fines de corregirlas y subsanarlas en su totalidad para evitar un da√±o mayor.
                        </p>

                        <p>
                            La conducta contraria a lo antes se√±alado, ser√° tomada como perjuicio material y da√±o 
                            patrimonial causado intencionalmente o por negligencia manifiesta al instituto y en 
                            consecuencia al Estado Venezolano; y se proceder√° de acuerdo a lo establecido en el 
                            art√≠culo 92 de la Ley de Bienes P√∫blico.
                        </p>

                        <p>
                            Es obligaci√≥n expresa del funcionario (a) conductor (a) de la unidad motorizada, realizar 
                            y registrar la inspecci√≥n diaria de la unidad, que ser√° supervisada y certificada por el 
                            Coordinador de este Centro de Coordinaci√≥n policial.
                        </p>

                        <p>
                            Se levanta la presente Acta de Entrega oblig√°ndose y comprometi√©ndose al funcionario (a) 
                            antes identificado (a), al cumplimiento de lo aqu√≠ pautado. Se elaboran tres (03) ejemplares 
                            aun mismo tenor. En el Centro de Coordinaci√≥n Policial del Estado Zulia, a los d√≠as 
                            <strong id="previewDia">28</strong> del mes de <strong id="previewMes">Noviembre</strong> 
                            del a√±o <strong id="previewAnio">2025</strong>.
                        </p>
                    </div>

                    <!-- Firmas -->
                    <div class="acta-signatures">
                        <div class="signature-box">
                            <div class="signature-line">
                                <p id="previewFirmaFuncionario">PRIMER COMISARIO (CPNB) ALBERTO PARRA<br>C√©dula de Identidad numero V-13.550.532</p>
                                <p style="font-size: 10pt; font-weight: normal; margin-top: 5px;">
                                    Funcionario Responsable quien recibe las unidades
                                </p>
                                <p style="font-size: 10pt; font-weight: normal;" id="previewUnidadFirma">
                                    Jefe de la Oficina de Gesti√≥n Humana de la Redip Occidental
                                </p>
                            </div>
                        </div>
                        
                        <div class="signature-box">
                            <div class="signature-line">
                                <p>COMISARIO MAYOR (CPNB) DR GUILLERMO PARRA PULIDO</p>
                                <p style="font-size: 10pt; font-weight: normal; margin-top: 5px;">
                                    Director de la Redip Occidental y Coordinador del CCPE-Zulia
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="acta-footer">
                        <p style="color: #000;">¬°Ch√°vez Vive!... La Patria Sigue...</p>
                        <p style="color: #000;">¬°Independencia y Patria Socialista...! ¬°Viviremos y Venceremos!</p>
                        <p style="color: #000;">PROTEGER, DEFENDER Y SERVIR A NUESTRO PUEBLO</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../js/config.js"></script>
    <script src="../js/acta-crear.js"></script>
</body>
</html>
