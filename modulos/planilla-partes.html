<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Partes Generales | Sistema de Gesti√≥n Administrativa</title>
<link rel="icon" href="../img/favicon.ico" type="image/x-icon">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../css/style.css">
<style>
/* ================= RESET Y BASE ================= */
*, *::before, *::after {
    box-sizing: border-box;
}
body {
    font-family: 'Roboto', sans-serif;
    background: #f5f7fa;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    color: #333;
    line-height: 1.5;
}

/* ================= CONTENEDOR PRINCIPAL ================= */
.form-container {
    background: white;
    padding: 35px;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 51, 102, 0.12);
    margin: 25px auto;
    width: 100%;
    max-width: 1440px;
}

/* ================= FILAS DEL FORMULARIO ================= */
.form-row {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 25px;
    width: 100%;
    margin-bottom: 25px;
}
.form-row:last-child {
    margin-bottom: 0;
}

/* ================= SECCIONES DEL FORMULARIO ================= */
.form-section {
    background: #fafbfc;
    border-radius: 10px;
    padding: 22px;
    border-top: 5px solid;
    min-width: 0;
    transition: box-shadow 0.3s ease, transform 0.3s ease;
    height: 100%;
}
.form-section:hover {
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
    transform: translateY(-2px);
}
.form-section.incidencia { border-color: #e76f51; }
.form-section.mantenimiento { border-color: #e9c46a; }
.form-section.documentacion { border-color: #9b5de5; }
.form-section.observaciones { border-color: #f15bb5; }
.form-section.full-width {
    grid-column: 1 / -1;
}

/* ================= HEADER DE SECCI√ìN ================= */
.form-section-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 18px;
    padding-bottom: 12px;
    border-bottom: 2px solid #e8eef5;
}
.form-section-icon {
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 8px;
    flex-shrink: 0;
}
.form-section.incidencia .form-section-icon { background: rgba(231, 111, 81, 0.2); }
.form-section.mantenimiento .form-section-icon { background: rgba(233, 196, 106, 0.2); }
.form-section.documentacion .form-section-icon { background: rgba(155, 93, 229, 0.2); }
.form-section.observaciones .form-section-icon { background: rgba(241, 91, 181, 0.2); }
.form-section-title {
    font-size: 0.95rem;
    color: #1a1a2e;
    font-weight: 700;
    text-transform: uppercase;
    margin: 0;
    letter-spacing: 0.8px;
}

/* ================= GRID DE CAMPOS ================= */
.form-fields-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 18px;
}
.form-section.full-width .form-fields-grid {
    grid-template-columns: repeat(4, 1fr);
    gap: 22px;
}

/* ================= GRUPOS DE CAMPOS ================= */
.form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
    min-width: 0;
}
.form-group label {
    font-size: 0.78rem;
    color: #4a5568;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap;
}
.form-group label .required {
    color: #dc2626;
    margin-left: 3px;
}

/* ================= INPUTS ================= */
.form-input, .form-select, .form-textarea {
    width: 100%;
    max-width: 100%;
    padding: 11px 14px;
    border: 2px solid #e2e8f0;
    border-radius: 7px;
    font-size: 0.92rem;
    font-family: 'Roboto', sans-serif;
    transition: all 0.25s ease;
    background: white;
    color: #2d3748;
}
.form-input:hover, .form-select:hover, .form-textarea:hover {
    border-color: #cbd5e0;
}
.form-input:focus, .form-select:focus, .form-textarea:focus {
    outline: none;
    border-color: #005b96;
    box-shadow: 0 0 0 3px rgba(0, 91, 150, 0.12);
    background: #fff;
}
.form-textarea {
    resize: vertical;
    min-height: 70px;
    line-height: 1.5;
}
.form-select {
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%234a5568' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 35px;
}

/* ================= BOTONES DE ACCI√ìN ================= */
.form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 18px;
    padding-top: 28px;
    margin-top: 28px;
    border-top: 2px solid #e8eef5;
    flex-wrap: wrap;
}
.btn {
    padding: 13px 32px;
    border-radius: 8px;
    font-size: 0.92rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.3s ease;
    border: none;
    white-space: nowrap;
}
.btn-secondary {
    background: #6c757d;
    color: white;
}
.btn-secondary:hover {
    background: #5a6268;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3);
}
.btn-primary {
    background: linear-gradient(135deg, #003366 0%, #005b96 100%);
    color: white;
    box-shadow: 0 4px 15px rgba(0, 51, 102, 0.35);
}
.btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 51, 102, 0.45);
}

/* ================= TABLA DE PARTES ================= */
.parts-table-container {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 51, 102, 0.12);
    margin: 25px auto;
    width: 100%;
    max-width: 1440px;
    overflow: hidden;
}
.parts-table {
    width: 100%;
    border-collapse: collapse;
}
.parts-table th,
.parts-table td {
    padding: 14px 18px;
    text-align: left;
    border-bottom: 1px solid #e2e8f0;
}
.parts-table th {
    background: #f8fafc;
    font-weight: 600;
    color: #4a5568;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.parts-table tr:hover {
    background: #f8fafc;
}
.parts-table .status-badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}
.status-badge.abierto { background: #fee2e2; color: #dc2626; }
.status-badge.en-proceso { background: #fef3c7; color: #d97706; }
.status-badge.cerrado { background: #d1fae5; color: #059669; }

/* ================= ALERTAS ================= */
.alert {
    padding: 16px 22px;
    border-radius: 8px;
    margin-bottom: 25px;
    display: none;
    align-items: center;
    gap: 12px;
    font-size: 0.92rem;
    font-weight: 500;
    animation: slideDown 0.3s ease;
}
@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
.alert-success {
    background: #d1fae5;
    color: #059669;
    border: 1px solid #059669;
}
.alert-error {
    background: #fee2e2;
    color: #dc2626;
    border: 1px solid #dc2626;
}

/* ================= RESPONSIVE ================= */
@media (max-width: 1200px) {
    .form-row {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    .form-section.full-width .form-fields-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}
@media (max-width: 768px) {
    .form-container {
        margin: 12px;
        padding: 18px;
        border-radius: 10px;
    }
    .form-section.full-width .form-fields-grid,
    .form-fields-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    .form-actions {
        flex-direction: column;
        gap: 12px;
    }
    .btn {
        width: 100%;
        justify-content: center;
        padding: 14px 28px;
    }
}
</style>
</head>
<body class="dashboard-page">
<!-- ================= NAVBAR ================= -->
<nav class="navbar">
    <div class="nav-container">
        <div class="nav-brand">
            <img src="../img/logo.png" alt="Logo" class="nav-logo" width="35" height="35">
            <span class="nav-title">Sistema Automatizado || Gesti√≥n Administrativa del CCPE ZULIA</span>
        </div>
        <div class="nav-user">
            <span class="user-email" id="userEmail">Cargando...</span>
            <button class="btn-logout" id="logoutBtn">üö™ Cerrar Sesi√≥n</button>
        </div>
    </div>
</nav>

<!-- ================= CONTENIDO PRINCIPAL ================= -->
<main class="dashboard-main">
    <header class="module-header">
        <div class="breadcrumb">
            <a href="../dashboard.html" class="breadcrumb-link">üè† Dashboard</a>
            <span class="breadcrumb-separator">/</span>
            <a href="planilla.html" class="breadcrumb-link">Planilla</a>
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-current">Partes Generales</span>
        </div>
        <button class="btn btn-secondary btn-sm" onclick="window.location.href='planilla.html'">
            ‚Üê Volver
        </button>
    </header>
    
    <section class="module-title-section">
        <h1 class="module-title">üìÑ Partes Generales de Veh√≠culos</h1>
        <p class="module-subtitle">Gesti√≥n de partes, incidencias y novedades de los veh√≠culos</p>
    </section>

    <!-- Alertas -->
    <div id="alertSuccess" class="alert alert-success">
        <span>‚úÖ</span>
        <span id="successMessage">Parte registrado exitosamente</span>
    </div>
    <div id="alertError" class="alert alert-error">
        <span>‚ùå</span>
        <span id="errorMessage">Error al registrar el parte</span>
    </div>

    <!-- Formulario de Nuevo Parte -->
    <div class="form-container">
        <form id="partsForm" novalidate>
            <!-- ================= FILA 1: DATOS DEL VEH√çCULO ================= -->
            <div class="form-row">
                <div class="form-section incidencia full-width">
                    <div class="form-section-header">
                        <span class="form-section-icon">üöó</span>
                        <h2 class="form-section-title">Datos del Veh√≠culo</h2>
                    </div>
                    <div class="form-fields-grid">
                        <div class="form-group">
                            <label>Placa <span class="required">*</span></label>
                            <input type="text" id="placa" name="placa" class="form-input" placeholder="AB123CD" required>
                        </div>
                        <div class="form-group">
                            <label>Marca</label>
                            <input type="text" id="marca" name="marca" class="form-input" placeholder="TOYOTA" readonly>
                        </div>
                        <div class="form-group">
                            <label>Modelo</label>
                            <input type="text" id="modelo" name="modelo" class="form-input" placeholder="HILUX" readonly>
                        </div>
                        <div class="form-group">
                            <label>Tipo</label>
                            <select id="tipo" name="tipo" class="form-select">
                                <option value="">Seleccione...</option>
                                <option value="AUTOMOVIL">AUTOMOVIL</option>
                                <option value="BUS">BUS</option>
                                <option value="CAMION">CAMION</option>
                                <option value="ENDURO">ENDURO</option>
                                <option value="MOTO">MOTO</option>
                                <option value="PICKUP">PICKUP</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ================= FILA 2: TIPO DE PARTE ================= -->
            <div class="form-row">
                <div class="form-section incidencia">
                    <div class="form-section-header">
                        <span class="form-section-icon">‚ö†Ô∏è</span>
                        <h2 class="form-section-title">Tipo de Parte</h2>
                    </div>
                    <div class="form-fields-grid">
                        <div class="form-group">
                            <label>Categor√≠a <span class="required">*</span></label>
                            <select id="categoria" name="categoria" class="form-select" required>
                                <option value="">Seleccione...</option>
                                <option value="INCIDENCIA">Incidencia</option>
                                <option value="MANTENIMIENTO">Mantenimiento</option>
                                <option value="REPARACION">Reparaci√≥n</option>
                                <option value="ACCIDENTE">Accidente</option>
                                <option value="ROBO">Robo/Hurto</option>
                                <option value="OTRO">Otro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Prioridad <span class="required">*</span></label>
                            <select id="prioridad" name="prioridad" class="form-select" required>
                                <option value="">Seleccione...</option>
                                <option value="BAJA">Baja</option>
                                <option value="MEDIA">Media</option>
                                <option value="ALTA">Alta</option>
                                <option value="URGENTE">Urgente</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-section mantenimiento">
                    <div class="form-section-header">
                        <span class="form-section-icon">üîß</span>
                        <h2 class="form-section-title">Estado</h2>
                    </div>
                    <div class="form-fields-grid">
                        <div class="form-group">
                            <label>Estado <span class="required">*</span></label>
                            <select id="estado" name="estado" class="form-select" required>
                                <option value="">Seleccione...</option>
                                <option value="ABIERTO">Abierto</option>
                                <option value="EN_PROCESO">En Proceso</option>
                                <option value="CERRADO">Cerrado</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Fecha del Parte <span class="required">*</span></label>
                            <input type="date" id="fecha_parte" name="fecha_parte" class="form-input" required>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ================= FILA 3: DESCRIPCI√ìN ================= -->
            <div class="form-section observaciones full-width">
                <div class="form-section-header">
                    <span class="form-section-icon">üìù</span>
                    <h2 class="form-section-title">Descripci√≥n del Parte</h2>
                </div>
                <div class="form-fields-grid">
                    <div class="form-group">
                        <label>Descripci√≥n Detallada <span class="required">*</span></label>
                        <textarea id="descripcion" name="descripcion" class="form-textarea" placeholder="Describa detalladamente la incidencia, mantenimiento o novedad..." required style="min-height: 120px;"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Observaciones Adicionales</label>
                        <textarea id="observaciones" name="observaciones" class="form-textarea" placeholder="Informaci√≥n complementaria..." style="min-height: 120px;"></textarea>
                    </div>
                </div>
            </div>

            <!-- ================= FILA 4: UBICACI√ìN Y RESPONSABLE ================= -->
            <div class="form-row">
                <div class="form-section documentacion">
                    <div class="form-section-header">
                        <span class="form-section-icon">üìç</span>
                        <h2 class="form-section-title">Ubicaci√≥n</h2>
                    </div>
                    <div class="form-fields-grid">
                        <div class="form-group">
                            <label>Unidad Administrativa</label>
                            <select id="unidad_administrativa" name="unidad_administrativa" class="form-select">
                                <option value="">Seleccione...</option>
                                <option value="OPERACIONES">OPERACIONES</option>
                                <option value="LOGISTICA">LOGISTICA</option>
                                <option value="TRANSPORTE">TRANSPORTE</option>
                                <option value="MANTENIMIENTO">MANTENIMIENTO</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ubicaci√≥n F√≠sica</label>
                            <input type="text" id="ubicacion_fisica" name="ubicacion_fisica" class="form-input" placeholder="Ej: CCPEM, Taller, etc.">
                        </div>
                    </div>
                </div>

                <div class="form-section documentacion">
                    <div class="form-section-header">
                        <span class="form-section-icon">üë§</span>
                        <h2 class="form-section-title">Responsable</h2>
                    </div>
                    <div class="form-fields-grid">
                        <div class="form-group">
                            <label>Nombre del Responsable</label>
                            <input type="text" id="responsable_nombre" name="responsable_nombre" class="form-input" placeholder="Nombre completo">
                        </div>
                        <div class="form-group">
                            <label>C√©dula/ID</label>
                            <input type="text" id="responsable_cedula" name="responsable_cedula" class="form-input" placeholder="V-12345678">
                        </div>
                    </div>
                </div>
            </div>

            <!-- ================= FILA 5: DOCUMENTACI√ìN ADJUNTA ================= -->
            <div class="form-section documentacion full-width">
                <div class="form-section-header">
                    <span class="form-section-icon">üìé</span>
                    <h2 class="form-section-title">Documentaci√≥n Adjunta</h2>
                </div>
                <div class="form-fields-grid">
                    <div class="form-group">
                        <label>N¬∞ de Tr√°mite</label>
                        <input type="text" id="n_tramite" name="n_tramite" class="form-input" placeholder="N√∫mero de tr√°mite">
                    </div>
                    <div class="form-group">
                        <label>Fecha de Inspecci√≥n</label>
                        <input type="date" id="fecha_inspeccion" name="fecha_inspeccion" class="form-input">
                    </div>
                    <div class="form-group">
                        <label>Costo Estimado (Bs.)</label>
                        <input type="number" id="costo_estimado" name="costo_estimado" class="form-input" placeholder="0.00" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>Taller/Proveedor</label>
                        <input type="text" id="taller_proveedor" name="taller_proveedor" class="form-input" placeholder="Nombre del taller">
                    </div>
                </div>
            </div>

            <!-- BOTONES DE ACCI√ìN -->
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="window.location.href='planilla.html'">
                    ‚ùå Cancelar
                </button>
                <button type="submit" class="btn btn-primary" id="btnSubmit">
                    <span class="btn-text">üíæ Registrar Parte</span>
                    <span class="btn-loader">‚è≥ Guardando...</span>
                </button>
            </div>
        </form>
    </div>

    <!-- ================= TABLA DE PARTES REGISTRADOS ================= -->
    <div class="parts-table-container">
        <div style="padding: 20px; border-bottom: 2px solid #e8eef5;">
            <h2 style="margin: 0; font-size: 1.1rem; color: #1a1a2e;">üìã Partes Registrados</h2>
        </div>
        <table class="parts-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Placa</th>
                    <th>Categor√≠a</th>
                    <th>Prioridad</th>
                    <th>Estado</th>
                    <th>Fecha</th>
                    <th>Responsable</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody id="partsTableBody">
                <!-- Los datos se cargar√°n din√°micamente -->
                <tr>
                    <td colspan="8" style="text-align: center; padding: 40px; color: #6c757d;">
                        Cargando partes registrados...
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</main>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
<script src="../js/config.js" defer></script>
<script src="../js/planilla-partes.js" defer></script>
</body>
</html>
